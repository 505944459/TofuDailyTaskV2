# 豆腐每日任务插件
## 一、这是一个怎样的插件?
 - 1.可高度自定义的每日任务的插件(支持任务随机、奖励随机)
 - 2.可以实现多端每日任务进度同步的插件(支持数据库实现多个服务端之间的数据同步)
 - 3.可以同时使用json、yaml配置的插件(支持解析两种格式的配置文档)
 - 4.一款内置GUI菜单的插件(虽然做得不怎么好嘛……)
 - 5.and more……
## 二、开始使用
 - 1.下载本插件的最新版本(确保支持自己的服务端和版本)
 - 2.丢进plugins文件夹并启动/重启你的服务器
 - 3.自定义配置
## 三、config.yml配置介绍

> 关于config.yml配置文件中的其他配置项在配置文档中均有易于理解的注释解释，在此文档中则不过多赘述。


config.yml中的rewards配置项，基础格式如下

```yaml
  points: #奖励的唯一id
    name: 【VIP】点券10-100点 #必须项，奖励的在GUI中显示出来的名字
    message: 点券 * %random% #必须项，获取奖励后的消息显示
    permission: permission.vip #非必须项，获取奖励要求的前提权限，无此项则不需要权限
    command: points give %player% %random% #非必须项，获取奖励时执行的命令
    random: #非必须项，随机值的的列表，不需要随机值则无需配置
      - 10 50 # <值> <权重>
      - 20 25
      - 25 25
      - 50 10
      - 100 5
```

如你所见，这就是一个奖励配置可能有的所有参数属性，咋一看，是不是感觉有那么一点繁琐和朦懂？别急，我来给你解释一番。
首先你可能会迷糊的是那个 %random% ，不过有些经验的你或许能猜到那是一个变量表示。
是的，它所表示的就是random里面的在获取奖励时随机到的值(可以为任何字符串/数字等)。其次就是%player%变量，这个就是代表的获取奖励的玩家的id啦。
然后解释一下random属性，下面的值都是成对出现的，例如第一个 - 10 50 ,其中10是这组随机变量的值，而50则是它在所有值中随机到的权重。
例如这个例子，总的权重的和为 50+25+25+10+5= 115，那么第一个10变量随机到的概率就为:50/115，后面很多关于随机权重参数的解释也是一样的。

## 四、任务配置介绍
配置文件中的配置基础格式(json/yaml):
```yaml
test_get: #任务的唯一id
  type: "test" #任务的类型
  name: "测试" #任务的名字
  display: "test" #任务的GUI显示图标
  lore:
    - #lore列表
    -
  weight: 100
  enable: true
  args:
   -
      #参数列表，至少一个
   -

```
```json
[
  {
    "id": "test_task",
    "type": "test", 
    "name": "测试任务", 
    "display": "test",
    "lore":[
      
    ],
    "weight": 100,
    "enable": true,
    "args": []
  }
]
```
> 每个json任务配置文件外层必须用[]包裹(代表这是一个数组)，然后可以存在多个任务配置(不懂建议先了解json格式或使用yaml配置任务)

## 五、任务配置中各个属性的介绍

### 1.id属性(yaml中为最外层的键值)
必须唯一的属性，用于区别每个任务，可以用指令通过id来操作这个任务
### 2.type属性
表示任务的类型，只能为固定值中的其中一个:
- break(方块破坏任务,可以指定item属性)
- place(方块放置任务,可以指定item属性)
- get(物品获取任务,可以指定item属性)
- kill(实体击杀任务,可以指定entity属性)
- craft(物品合成任务,可以指定item属性)
- fish(钓鱼任务,可以指定item属性)
- enchant(物品附魔任务,可以指定item属性)
- destroy(工具损坏任务,可以指定item属性)
- eat(物品食用、饮用任务,可以指定item属性)
### 3.name属性
任务的显示名字（GUI中的显示以及任务完成时的提示中显示），可以使用args中的变量(具体见下面)
### 4.display属性
任务的显示物品(GUI中的显示)，可以使用args中的%item%变量(具体见下面)
### 5.lore属性
这是一个数组属性，可以有一条或者多条，任务的显示物品的lore属性(GUI中的显示)，可以使用args中的变量(具体见下面)
### 6.weight属性
是一个小于10000的正整数，代表这个任务被随机到的权重
### 7.enable属性
为true或者false，代表任务是否被启用，未被启用的任务不会被玩家自动领取到，但可以通过管理员指令获取该任务(用于任务测试)
### 8.args属性
是一个对象数组，代表这个任务的所有可能的属性对象，每个对象可能有如下的一些属性，其中必须属性是一定存在的
#### 8.1 name属性
必须属性，代表这个args的名字，可以在上面的name和lore属性中用%name%替代
#### 8.2 item属性
如果任务需要指定物品，如破坏/获取任务等，这个属性代表的指定物品的id，可以在上面的name和lore属性中用%item%替代
#### 8.3 entity属性
如果任务需要指定实体，如击杀任务，这个属性代表指定的实体的id，如果id为mythicMobs实体的id，则需要加上mm:的前缀，可以在上面的name和lore属性中用%entity%替代
#### 8.4 amount属性
必须属性，代表这个任务需要完成的次数，如击杀次数/获取次数等，可以在上面的name和lore属性中用%amount%替代，另外，还可以使用%finish%代表这个任务已经完成的次数
#### 8.5 weigh属性
必须属性，代表这个参数被随机到的权重，是一个小于10000的正整数。
> 还是有疑问？不如看看插件里的task文件下的自带配置文件，或许你会豁然开朗？